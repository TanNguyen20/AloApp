
<header>
    <div class="">
        <div class="container-fluid">
            <img src="/assets/images/background.jpg" class="rounded-bottom w-sm-100 w-xs-100 w-md-100 w-lg-75 w-xl-75 d-block mx-auto mb-auto h-xs-30 h-sm-30 h-md-40 h-lg-40 h-xl-40" alt="Ảnh bìa">
            <div class="wrapAvatarAndIconProfile">
                <img src="{{info.avatar}}" class="avatarProfile rounded-circle w-sm-25 w-xs-25 w-md-25 w-lg-15 w-xl-15 d-block mx-auto mb-auto" alt="Ảnh bìa">
                <i class="fas fa-camera rounded-circle iconPhoto"></i>

               <div class="wrapEditProfile rounded">
                    <i class="fas fa-camera"></i>
                    <div class="d-none d-sm-none d-md-none d-lg-inline-block d-xl-inline-block">Chỉnh sửa ảnh bìa</div>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-4 pt-4">
                <h3>{{info.displayName}}</h3>
            </div>
        </div>
    </div>
</header>

<div class="container border-top  w-sm-100 w-xs-100 w-md-100 w-lg-75 w-xl-75 d-block mx-auto mb-auto h-xs-30 h-sm-30 h-md-40 h-lg-40 h-xl-40">
    <div class="d-lg-flex d-sm-block d-md-block justify-content-between" >
        <div class="itemsInfomation">
            <div class="headerInfoLeft">Thông tin cá nhân</div>
            <div class="contentInfo contentInfoLeft">
                <div class="">Tên người dùng: {{info.displayName}}</div>
                <div class="">Email: {{info.email}}</div>
                <div class="mb-2">Số điện thoại: {{info.numberPhone}}</div>
            </div>
        </div>
        <form class="itemsInfomation" id="formChangeInfo" method="post">
            <div class="headerInfoRight">
                Chỉnh sửa thông tin cá nhân
            </div>
            <div class="contentInfo contentInfoRight d-table form-group">
                <div class="d-table-row auth-form__group">
                    <label for="displayName" class="d-table-cell pe-2">Tên người dùng: </label>
                    <input type="text" name="displayName" rules="required" id="displayName" class="form-control shadow-none d-table-cell" value="{{info.displayName}}">
                    <span class="form-message"></span>
                </div>
                <div class="d-table-row auth-form__group">
                    <label for="displayName" class="d-table-cell">Email: </label>
                    <input type="text" rules="required" name="email" id="email" class="form-control shadow-none d-table-cell" value="{{info.email}}">
                    <span class="form-message"></span>
                </div>
                <div class="d-table-row">
                    <label for="displayName" class="d-table-cell">Số điện thoại: </label>
                    <input type="text" id="numberPhone" name="numberPhone" class="form-control shadow-none d-table-cell" value="{{info.numberPhone}}">
                    <span class="form-message"></span>
                </div>
                <div class="d-table-row">
                    <div class="d-table-cell"></div>
                    <button class="btn btn-primary mt-2 mb-2" id="btnChangeInfo">Chỉnh sửa</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="/assets/js/validator.js"></script>
<script>
    $(document).ready(function(){
        $('.contentInfoRight').removeClass('d-table');
        $('.contentInfoRight').addClass('d-none');
        $('.contentInfoLeft').show();
    });
    $('.itemsInfomation').each(function(){
        $(this).click(function(){
            $('.itemsInfomation').removeClass('borderItemsInfomation');
            $(this).addClass('borderItemsInfomation');
        });
    });
    $('.headerInfoRight').click(function(e){
        $('.contentInfoLeft').hide();
        $('.contentInfoRight').removeClass('d-none');
        $('.contentInfoRight').addClass('d-table');
    });
    $('.headerInfoLeft').click(function(e){
        $('.contentInfoRight').removeClass('d-table');
        $('.contentInfoRight').addClass('d-none');
        $('.contentInfoLeft').show();
    });
    var formChangeInfoCheck = new Validator("#formChangeInfo");
    $('#btnChangeInfo').click(function(e){
        var formChangeInfoCheck = Validator("#formChangeInfo");
        if(formChangeInfoCheck){
            e.preventDefault();
            var displayName = $('#displayName').val();
            var email = $('#email').val();
            var numberPhone = $('#numberPhone').val();
            $.post('/me/changeInfo',{displayName, email, numberPhone},function(data,status){
                if(data=='1' && status=='success'){
                    swal({
                        title: "Thông báo",
                        text: "Cập nhật thông tin thành công!",
                        icon: "success",
                        button: "Đóng",
                    })
                    .then(()=>{
                        location.reload();
                    });
                }
                else{
                    swal({
                        title: "Thông báo",
                        text: "Đăng kí thất bại!",
                        icon: "error",
                        button: "Đóng",
                    });
                }
            });
        }
      
    });
</script>